\hypertarget{controller_8cpp}{}\doxysection{controller.\+cpp File Reference}
\label{controller_8cpp}\index{controller.cpp@{controller.cpp}}


This is the controller node.  


{\ttfamily \#include \char`\"{}ros/ros.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}sensor\+\_\+msgs/\+Laser\+Scan.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}assignement\+\_\+3/\+User.\+h\char`\"{}}\newline
{\ttfamily \#include $<$iostream$>$}\newline
{\ttfamily \#include \char`\"{}geometry\+\_\+msgs/\+Twist.\+h\char`\"{}}\newline
{\ttfamily \#include $<$sstream$>$}\newline
{\ttfamily \#include \char`\"{}move\+\_\+base\+\_\+msgs/\+Move\+Base\+Action\+Goal.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}actionlib\+\_\+msgs/\+Goal\+I\+D.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}actionlib\+\_\+msgs/\+Goal\+Status\+Array.\+h\char`\"{}}\newline
Include dependency graph for controller.\+cpp\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{controller_8cpp__incl}
\end{center}
\end{figure}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{controller_8cpp_ac0a9b1dca1f085d398626129998f7186}{read\+\_\+status}} (const actionlib\+\_\+msgs\+::\+Goal\+Status\+Array\+::\+Const\+Ptr \&msg)
\begin{DoxyCompactList}\small\item\em Callback function of the subscriber sub\+\_\+goal. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{controller_8cpp_a29c5b059de72bf20e1de144dce5e0fd1}{read\+\_\+velocity}} (const geometry\+\_\+msgs\+::\+Twist\+::\+Const\+Ptr \&msg)
\begin{DoxyCompactList}\small\item\em Callback function of the subscriber sub\+\_\+vel. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{controller_8cpp_a3772cc0ab2e2c87086a7e64a7baf8370}{user\+\_\+input}} (const assignement\+\_\+3\+::\+User\+::\+Const\+Ptr \&msg)
\begin{DoxyCompactList}\small\item\em Callback function of the subscriber sub\+\_\+user. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{controller_8cpp_a70ecf78542d980423ef2309df196cfb3}{robot\+Callback}} (const sensor\+\_\+msgs\+::\+Laser\+Scan\+::\+Const\+Ptr \&msg)
\begin{DoxyCompactList}\small\item\em Callback function of the subscriber sub\+\_\+scan,. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{controller_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}{main}} (int argc, char $\ast$$\ast$argv)
\begin{DoxyCompactList}\small\item\em the main function \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{controller_8cpp_adfab4eebf850cff6c1c1c4b8aa408293}\label{controller_8cpp_adfab4eebf850cff6c1c1c4b8aa408293}} 
int \mbox{\hyperlink{controller_8cpp_adfab4eebf850cff6c1c1c4b8aa408293}{input}}
\begin{DoxyCompactList}\small\item\em Holds the mode entred by the user 1,2,3 or 4. ~\newline
 \end{DoxyCompactList}\item 
\mbox{\Hypertarget{controller_8cpp_a6e27f49150e9a14580fb313cc2777e00}\label{controller_8cpp_a6e27f49150e9a14580fb313cc2777e00}} 
int \mbox{\hyperlink{controller_8cpp_a6e27f49150e9a14580fb313cc2777e00}{status}}
\begin{DoxyCompactList}\small\item\em Holds the status of the goal (reachable or not), returned by the {\itshape read\+\_\+status} callback funtion. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{controller_8cpp_ad0da36b2558901e21e7a30f6c227a45e}\label{controller_8cpp_ad0da36b2558901e21e7a30f6c227a45e}} 
float \mbox{\hyperlink{controller_8cpp_ad0da36b2558901e21e7a30f6c227a45e}{x}}
\begin{DoxyCompactList}\small\item\em Holds the x-\/axis coordinate of the goal of the form (x,y). \end{DoxyCompactList}\item 
\mbox{\Hypertarget{controller_8cpp_aa4f0d3eebc3c443f9be81bf48561a217}\label{controller_8cpp_aa4f0d3eebc3c443f9be81bf48561a217}} 
float \mbox{\hyperlink{controller_8cpp_aa4f0d3eebc3c443f9be81bf48561a217}{y}}
\begin{DoxyCompactList}\small\item\em Holds the y-\/axis coorfinate of the goal of the form (x,y). \end{DoxyCompactList}\item 
\mbox{\Hypertarget{controller_8cpp_a6ef24e69b57370abcf35b40ec777f18f}\label{controller_8cpp_a6ef24e69b57370abcf35b40ec777f18f}} 
float \mbox{\hyperlink{controller_8cpp_a6ef24e69b57370abcf35b40ec777f18f}{linear\+\_\+x}}
\begin{DoxyCompactList}\small\item\em Holds the linear velocity published to the robot. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{controller_8cpp_afa644bf33e0fb93ec0f706746816bbcd}\label{controller_8cpp_afa644bf33e0fb93ec0f706746816bbcd}} 
float \mbox{\hyperlink{controller_8cpp_afa644bf33e0fb93ec0f706746816bbcd}{angular\+\_\+z}}
\begin{DoxyCompactList}\small\item\em Holds the angular velocity published to the tobot. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{controller_8cpp_a3c603a803d713e1425a427fe6cff6b62}\label{controller_8cpp_a3c603a803d713e1425a427fe6cff6b62}} 
move\+\_\+base\+\_\+msgs\+::\+Move\+Base\+Action\+Goal \mbox{\hyperlink{controller_8cpp_a3c603a803d713e1425a427fe6cff6b62}{target}}
\begin{DoxyCompactList}\small\item\em Action used to set the goal point in case the robot is in mode1. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{controller_8cpp_a7b2aeb13752132d33b349976069190e4}\label{controller_8cpp_a7b2aeb13752132d33b349976069190e4}} 
actionlib\+\_\+msgs\+::\+Goal\+ID \mbox{\hyperlink{controller_8cpp_a7b2aeb13752132d33b349976069190e4}{cancel}}
\begin{DoxyCompactList}\small\item\em Action used to cancel the goal. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{controller_8cpp_ae057aae7fbba2a4cef62321020305295}\label{controller_8cpp_ae057aae7fbba2a4cef62321020305295}} 
ros\+::\+Publisher \mbox{\hyperlink{controller_8cpp_ae057aae7fbba2a4cef62321020305295}{pub\+\_\+goal}}
\begin{DoxyCompactList}\small\item\em Global publisher to the topic {\itshape /move\+\_\+base/goal}, to publish the goal point. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{controller_8cpp_a33cbe548b1e0f6b08bbe754f53af458c}\label{controller_8cpp_a33cbe548b1e0f6b08bbe754f53af458c}} 
ros\+::\+Publisher \mbox{\hyperlink{controller_8cpp_a33cbe548b1e0f6b08bbe754f53af458c}{pub\+\_\+cancel}}
\begin{DoxyCompactList}\small\item\em Global publisher to the topic {\itshape /move\+\_\+base/cancel}, to cancel the goal. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{controller_8cpp_ac0664a23d360105ec3d579965d5b7631}\label{controller_8cpp_ac0664a23d360105ec3d579965d5b7631}} 
ros\+::\+Publisher \mbox{\hyperlink{controller_8cpp_ac0664a23d360105ec3d579965d5b7631}{pub\+\_\+vel}}
\begin{DoxyCompactList}\small\item\em Global publisher to the topic {\itshape /cmd\+\_\+vel}, to publish the velocity to the robot. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{controller_8cpp_a5a86d0c3afe24a3de1e0ea1f05497e96}\label{controller_8cpp_a5a86d0c3afe24a3de1e0ea1f05497e96}} 
ros\+::\+Subscriber \mbox{\hyperlink{controller_8cpp_a5a86d0c3afe24a3de1e0ea1f05497e96}{sub\+\_\+scan}}
\begin{DoxyCompactList}\small\item\em Global subscriber to the topic {\itshape /\+Laser\+Scan}. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{controller_8cpp_a7668de4880d08da847093e54f4b52a2f}\label{controller_8cpp_a7668de4880d08da847093e54f4b52a2f}} 
ros\+::\+Subscriber \mbox{\hyperlink{controller_8cpp_a7668de4880d08da847093e54f4b52a2f}{sub\+\_\+vel}}
\begin{DoxyCompactList}\small\item\em Global subscriber to the topic {\itshape /cmd\+\_\+vel}, to retriev the current velocity of the robot. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{controller_8cpp_a359ce9ab740d64210def5006117bc139}\label{controller_8cpp_a359ce9ab740d64210def5006117bc139}} 
ros\+::\+Subscriber \mbox{\hyperlink{controller_8cpp_a359ce9ab740d64210def5006117bc139}{sub\+\_\+goal\+\_\+status}}
\begin{DoxyCompactList}\small\item\em Global subscriber to the topic {\itshape /move\+\_\+base/status}, to retriev the status of the goal. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{controller_8cpp_aa8f9f5e5cc756c0d17bb4bbc7c9e21fa}\label{controller_8cpp_aa8f9f5e5cc756c0d17bb4bbc7c9e21fa}} 
ros\+::\+Subscriber \mbox{\hyperlink{controller_8cpp_aa8f9f5e5cc756c0d17bb4bbc7c9e21fa}{sub\+\_\+user}}
\begin{DoxyCompactList}\small\item\em Global subscriber to the topic {\itshape /user\+\_\+topic}, to retriev the mode entred by the user. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This is the controller node. 

\begin{DoxyAuthor}{Author}
Bakour Abdelghani \href{mailto:bakourabdelghani1999@gmail.com}{\texttt{ bakourabdelghani1999@gmail.\+com}} 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
1.\+0 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
25/12/2021
\end{DoxyDate}
Publishers to\+:~\newline
 /move\+\_\+base/goal /move\+\_\+base/cancel /cmd\+\_\+vel ~\newline


Subscribers to\+:~\newline
 /user\+\_\+topic /scan /cmd\+\_\+vel /move\+\_\+base/status

Actions \+:~\newline
 /\+Move\+Base\+Action\+Goal /\+Goal\+ID /\+Goal\+Status\+Array

Description\+: ~\newline
 Control the robot depending on the {\bfseries{mode}} entred by the user. There are {\bfseries{four}} modes\+: {\itshape mode1}, {\itshape mode2}, {\itshape mode3} and {\itshape mode4} If the user choose {\bfseries{mode1}} he must set a goal point. The goal can be {\itshape canceled} by pressing \char`\"{}4\char`\"{} that takes you to {\bfseries{mode4}}, in this mode the robot stops and do nothing, However {\bfseries{mode2}} and {\bfseries{mode3}} are used for driving the robot by the {\itshape keyboard}.

\begin{DoxyNote}{Note}
This node must be run at the same time with the node {\bfseries [user\+\_\+interface.\+cpp]} 

To make sure everything work correctly you can run the the launch file, 

{\bfseries{Solution.\+launch}}. 
\end{DoxyNote}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{user__interface_8cpp}{user\+\_\+interface.\+cpp}} 
\end{DoxySeeAlso}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{controller_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}\label{controller_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}} 
\index{controller.cpp@{controller.cpp}!main@{main}}
\index{main@{main}!controller.cpp@{controller.cpp}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily int main (\begin{DoxyParamCaption}\item[{int}]{argc,  }\item[{char $\ast$$\ast$}]{argv }\end{DoxyParamCaption})}



the main function 


\begin{DoxyParams}{Parameters}
{\em argc} & \\
\hline
{\em argv} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0
\end{DoxyReturn}
Description\+: initialize all the publishers and subscribers \mbox{\Hypertarget{controller_8cpp_ac0a9b1dca1f085d398626129998f7186}\label{controller_8cpp_ac0a9b1dca1f085d398626129998f7186}} 
\index{controller.cpp@{controller.cpp}!read\_status@{read\_status}}
\index{read\_status@{read\_status}!controller.cpp@{controller.cpp}}
\doxysubsubsection{\texorpdfstring{read\_status()}{read\_status()}}
{\footnotesize\ttfamily void read\+\_\+status (\begin{DoxyParamCaption}\item[{const actionlib\+\_\+msgs\+::\+Goal\+Status\+Array\+::\+Const\+Ptr \&}]{msg }\end{DoxyParamCaption})}



Callback function of the subscriber sub\+\_\+goal. 

\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{controller_8cpp_a359ce9ab740d64210def5006117bc139}{sub\+\_\+goal\+\_\+status}} 
\end{DoxySeeAlso}

\begin{DoxyParams}{Parameters}
{\em msg} & actionlib message holds the goal status \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
nothing 
\end{DoxyReturn}
\begin{DoxyAttention}{Attention}
in order to know if the goal is not reacheable 

the whole map should be discovered
\end{DoxyAttention}
\begin{DoxyNote}{Note}
This function prints one of the possible status of the goal 

{\bfseries{reacheable}} or {\bfseries{not reacheable}} or {\bfseries{under proccesing}} 
\end{DoxyNote}
\mbox{\Hypertarget{controller_8cpp_a29c5b059de72bf20e1de144dce5e0fd1}\label{controller_8cpp_a29c5b059de72bf20e1de144dce5e0fd1}} 
\index{controller.cpp@{controller.cpp}!read\_velocity@{read\_velocity}}
\index{read\_velocity@{read\_velocity}!controller.cpp@{controller.cpp}}
\doxysubsubsection{\texorpdfstring{read\_velocity()}{read\_velocity()}}
{\footnotesize\ttfamily void read\+\_\+velocity (\begin{DoxyParamCaption}\item[{const geometry\+\_\+msgs\+::\+Twist\+::\+Const\+Ptr \&}]{msg }\end{DoxyParamCaption})}



Callback function of the subscriber sub\+\_\+vel. 

\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{controller_8cpp_a7668de4880d08da847093e54f4b52a2f}{sub\+\_\+vel}} ~\newline
 
\end{DoxySeeAlso}

\begin{DoxyParams}{Parameters}
{\em msg} & holds the angular and linear velocity of the robot \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
nothing 
\end{DoxyReturn}
\mbox{\Hypertarget{controller_8cpp_a70ecf78542d980423ef2309df196cfb3}\label{controller_8cpp_a70ecf78542d980423ef2309df196cfb3}} 
\index{controller.cpp@{controller.cpp}!robotCallback@{robotCallback}}
\index{robotCallback@{robotCallback}!controller.cpp@{controller.cpp}}
\doxysubsubsection{\texorpdfstring{robotCallback()}{robotCallback()}}
{\footnotesize\ttfamily void robot\+Callback (\begin{DoxyParamCaption}\item[{const sensor\+\_\+msgs\+::\+Laser\+Scan\+::\+Const\+Ptr \&}]{msg }\end{DoxyParamCaption})}



Callback function of the subscriber sub\+\_\+scan,. 

\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{controller_8cpp_a5a86d0c3afe24a3de1e0ea1f05497e96}{sub\+\_\+scan}} ~\newline
 
\end{DoxySeeAlso}

\begin{DoxyParams}{Parameters}
{\em msg} & of type Laser\+Scan\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
nothing
\end{DoxyReturn}
\begin{DoxyNote}{Note}
Used as a continous loop of the control function, because 

of the high frequency, ~\newline
 

It holds the code of all the 4 {\bfseries{modes}} entred by the user 
\end{DoxyNote}
\begin{DoxyWarning}{Warning}
It is called contineously because the robot publishes 

data to the /\+Laser\+Scan topic very rapidely 

this is why the main part of the code is putted her. 
\end{DoxyWarning}
\mbox{\Hypertarget{controller_8cpp_a3772cc0ab2e2c87086a7e64a7baf8370}\label{controller_8cpp_a3772cc0ab2e2c87086a7e64a7baf8370}} 
\index{controller.cpp@{controller.cpp}!user\_input@{user\_input}}
\index{user\_input@{user\_input}!controller.cpp@{controller.cpp}}
\doxysubsubsection{\texorpdfstring{user\_input()}{user\_input()}}
{\footnotesize\ttfamily void user\+\_\+input (\begin{DoxyParamCaption}\item[{const assignement\+\_\+3\+::\+User\+::\+Const\+Ptr \&}]{msg }\end{DoxyParamCaption})}



Callback function of the subscriber sub\+\_\+user. 

\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{controller_8cpp_aa8f9f5e5cc756c0d17bb4bbc7c9e21fa}{sub\+\_\+user}} 
\end{DoxySeeAlso}

\begin{DoxyParams}{Parameters}
{\em msg} & the message entred by the user that holds the mode\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
nothing
\end{DoxyReturn}
\begin{DoxyNote}{Note}
Prints the mode choosen by the user {\bfseries{1,2,3, or 4}} 
\end{DoxyNote}
\begin{DoxyAttention}{Attention}
msg\+: is a customized message has the following format\+: 

int32 user 

float32 x 

float32 y 
\end{DoxyAttention}
\begin{DoxyWarning}{Warning}
This callback function t is called {\bfseries{only}} when the user enters new data. 

For example changing the mode 
\end{DoxyWarning}
